{"ast":null,"code":"const {\n  default: db\n} = require(\"./Dexie/db\");\n\nconst {\n  useEffect\n} = require(\"react\");\n\nuseEffect(() => {});\n\nonmessage = e => {\n  if (e.data.op === 'add') {\n    // ws.onopen = () => {\n    //     console.log(\"open connection\");\n    //     ws.send(JSON.stringify(e.data.value));\n    // };\n    ws.send(JSON.stringify(e.data.value));\n\n    ws.onmessage = async msg => {\n      console.log(\"getMessage\", msg.data);\n      let data = JSON.parse(msg.data);\n      await db.comments.add({\n        text: data.cmnt\n      }).then(() => {\n        postMessage(msg.data);\n      }).catch(err => {\n        window.alert(err);\n      });\n    };\n  }\n};","map":{"version":3,"sources":["/Users/nirob/Desktop/rfh-chat/simplechat/src/worker.js"],"names":["default","db","require","useEffect","onmessage","e","data","op","ws","send","JSON","stringify","value","msg","console","log","parse","comments","add","text","cmnt","then","postMessage","catch","err","window","alert"],"mappings":"AAAA,MAAM;AAAEA,EAAAA,OAAO,EAAEC;AAAX,IAAkBC,OAAO,CAAC,YAAD,CAA/B;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAgBD,OAAO,CAAC,OAAD,CAA7B;;AAEAC,SAAS,CAAC,MAAK,CAEd,CAFQ,CAAT;;AAIAC,SAAS,GAAGC,CAAC,IAAI;AACb,MAAIA,CAAC,CAACC,IAAF,CAAOC,EAAP,KAAc,KAAlB,EAAyB;AAErB;AACA;AACA;AACA;AACAC,IAAAA,EAAE,CAACC,IAAH,CAAQC,IAAI,CAACC,SAAL,CAAeN,CAAC,CAACC,IAAF,CAAOM,KAAtB,CAAR;;AACAJ,IAAAA,EAAE,CAACJ,SAAH,GAAe,MAAMS,GAAN,IAAa;AACxBC,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BF,GAAG,CAACP,IAA9B;AACA,UAAIA,IAAI,GAAGI,IAAI,CAACM,KAAL,CAAWH,GAAG,CAACP,IAAf,CAAX;AACA,YAAML,EAAE,CAACgB,QAAH,CAAYC,GAAZ,CAAgB;AAClBC,QAAAA,IAAI,EAAEb,IAAI,CAACc;AADO,OAAhB,EAEHC,IAFG,CAEE,MAAK;AACTC,QAAAA,WAAW,CAACT,GAAG,CAACP,IAAL,CAAX;AACH,OAJK,EAIHiB,KAJG,CAIIC,GAAD,IAAQ;AACbC,QAAAA,MAAM,CAACC,KAAP,CAAaF,GAAb;AACH,OANK,CAAN;AAOH,KAVD;AAWH;AACJ,CApBD","sourcesContent":["const { default: db } = require(\"./Dexie/db\");\nconst { useEffect } = require(\"react\");\n\nuseEffect(()=> {\n    \n})\n\nonmessage = e => {\n    if (e.data.op === 'add') {\n        \n        // ws.onopen = () => {\n        //     console.log(\"open connection\");\n        //     ws.send(JSON.stringify(e.data.value));\n        // };\n        ws.send(JSON.stringify(e.data.value));\n        ws.onmessage = async msg => {\n            console.log(\"getMessage\", msg.data);\n            let data = JSON.parse(msg.data);\n            await db.comments.add({\n                text: data.cmnt\n            }).then(()=> {\n                postMessage(msg.data);\n            }).catch((err)=> {\n                window.alert(err);\n            })\n        };\n    }\n}\n"]},"metadata":{},"sourceType":"module"}