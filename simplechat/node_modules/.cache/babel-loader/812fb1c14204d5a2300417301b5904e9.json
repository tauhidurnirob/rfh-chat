{"ast":null,"code":"const {\n  default: db\n} = require(\"./Dexie/db\");\n\nlet ws;\n\nonmessage = e => {\n  if (e.data.op === 'connect') {\n    ws = new WebSocket(\"ws://localhost:3000/socket\");\n\n    ws.onopen = () => {\n      console.log(\"open connection\");\n    };\n  } else if (e.data.op === 'close') {\n    ws.close();\n  } else if (e.data.op === 'add') {\n    ws.send(JSON.stringify(e.data.value));\n\n    ws.onmessage = msg => {\n      console.log(\"getMessage\", msg.data);\n      let data = JSON.parse(msg.data);\n      db.comments.add({\n        text: data.cmnt\n      }).then(() => {\n        postMessage(msg.data);\n      }).catch(err => {\n        window.alert(err);\n      });\n    };\n  }\n};","map":{"version":3,"sources":["/Users/nirob/Desktop/rfh-chat/simplechat/src/worker.js"],"names":["default","db","require","ws","onmessage","e","data","op","WebSocket","onopen","console","log","close","send","JSON","stringify","value","msg","parse","comments","add","text","cmnt","then","postMessage","catch","err","window","alert"],"mappings":"AAAA,MAAM;AAAEA,EAAAA,OAAO,EAAEC;AAAX,IAAkBC,OAAO,CAAC,YAAD,CAA/B;;AAEA,IAAIC,EAAJ;;AAEAC,SAAS,GAAGC,CAAC,IAAI;AACb,MAAGA,CAAC,CAACC,IAAF,CAAOC,EAAP,KAAc,SAAjB,EAA4B;AACxBJ,IAAAA,EAAE,GAAG,IAAIK,SAAJ,CAAc,4BAAd,CAAL;;AACAL,IAAAA,EAAE,CAACM,MAAH,GAAY,MAAM;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACH,KAFD;AAGH,GALD,MAMK,IAAGN,CAAC,CAACC,IAAF,CAAOC,EAAP,KAAc,OAAjB,EAA0B;AAC3BJ,IAAAA,EAAE,CAACS,KAAH;AACH,GAFI,MAGA,IAAIP,CAAC,CAACC,IAAF,CAAOC,EAAP,KAAc,KAAlB,EAAyB;AAC1BJ,IAAAA,EAAE,CAACU,IAAH,CAAQC,IAAI,CAACC,SAAL,CAAeV,CAAC,CAACC,IAAF,CAAOU,KAAtB,CAAR;;AACAb,IAAAA,EAAE,CAACC,SAAH,GAAea,GAAG,IAAI;AAClBP,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BM,GAAG,CAACX,IAA9B;AACA,UAAIA,IAAI,GAAGQ,IAAI,CAACI,KAAL,CAAWD,GAAG,CAACX,IAAf,CAAX;AACAL,MAAAA,EAAE,CAACkB,QAAH,CAAYC,GAAZ,CAAgB;AACZC,QAAAA,IAAI,EAAEf,IAAI,CAACgB;AADC,OAAhB,EAEGC,IAFH,CAEQ,MAAK;AACTC,QAAAA,WAAW,CAACP,GAAG,CAACX,IAAL,CAAX;AACH,OAJD,EAIGmB,KAJH,CAIUC,GAAD,IAAQ;AACbC,QAAAA,MAAM,CAACC,KAAP,CAAaF,GAAb;AACH,OAND;AAOH,KAVD;AAWH;AACJ,CAxBD","sourcesContent":["const { default: db } = require(\"./Dexie/db\");\n\nlet ws;\n\nonmessage = e => {\n    if(e.data.op === 'connect') {\n        ws = new WebSocket(\"ws://localhost:3000/socket\");\n        ws.onopen = () => {\n            console.log(\"open connection\");\n        };\n    }\n    else if(e.data.op === 'close') {\n        ws.close();\n    }\n    else if (e.data.op === 'add') {\n        ws.send(JSON.stringify(e.data.value));\n        ws.onmessage = msg => {\n            console.log(\"getMessage\", msg.data);\n            let data = JSON.parse(msg.data);\n            db.comments.add({\n                text: data.cmnt\n            }).then(()=> {\n                postMessage(msg.data);\n            }).catch((err)=> {\n                window.alert(err);\n            })\n        };\n    }\n}\n"]},"metadata":{},"sourceType":"module"}