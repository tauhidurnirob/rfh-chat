{"ast":null,"code":"var _jsxFileName = \"/Users/nirob/Desktop/rfh-chat/simplechat/src/worker.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet ws;\n\nconst Abc = () => {\n  _s();\n\n  useEffect(() => {\n    ws = new WebSocket(\"ws://localhost:3000\");\n\n    ws.onopen = () => {\n      console.log(\"open connection\");\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 12\n  }, this);\n};\n\n_s(Abc, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = Abc;\nexport default Abc; // const { default: db } = require(\"./Dexie/db\");\n\nonmessage = e => {\n  if (e.data.op === 'add') {\n    // ws.onopen = () => {\n    //     console.log(\"open connection\");\n    //     ws.send(JSON.stringify(e.data.value));\n    // };\n    ws.send(JSON.stringify(e.data.value));\n\n    ws.onmessage = async msg => {\n      console.log(\"getMessage\", msg.data);\n      let data = JSON.parse(msg.data);\n      await db.comments.add({\n        text: data.cmnt\n      }).then(() => {\n        postMessage(msg.data); // ws.close()\n      }).catch(err => {\n        window.alert(err);\n      });\n    };\n  }\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"Abc\");","map":{"version":3,"sources":["/Users/nirob/Desktop/rfh-chat/simplechat/src/worker.js"],"names":["React","useEffect","ws","Abc","WebSocket","onopen","console","log","onmessage","e","data","op","send","JSON","stringify","value","msg","parse","db","comments","add","text","cmnt","then","postMessage","catch","err","window","alert"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;AACA,IAAIC,EAAJ;;AAEA,MAAMC,GAAG,GAAG,MAAM;AAAA;;AACdF,EAAAA,SAAS,CAAC,MAAK;AACXC,IAAAA,EAAE,GAAG,IAAIE,SAAJ,CAAc,qBAAd,CAAL;;AACAF,IAAAA,EAAE,CAACG,MAAH,GAAY,MAAM;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACH,KAFD;AAGH,GALQ,EAKP,EALO,CAAT;AAOA,sBAAO;AAAA;AAAA;AAAA;AAAA,UAAP;AACH,CATD;;GAAMJ,G;;KAAAA,G;AAWN,eAAeA,GAAf,C,CAEA;;AAEAK,SAAS,GAAGC,CAAC,IAAI;AACb,MAAIA,CAAC,CAACC,IAAF,CAAOC,EAAP,KAAc,KAAlB,EAAyB;AACrB;AACA;AACA;AACA;AACAT,IAAAA,EAAE,CAACU,IAAH,CAAQC,IAAI,CAACC,SAAL,CAAeL,CAAC,CAACC,IAAF,CAAOK,KAAtB,CAAR;;AACAb,IAAAA,EAAE,CAACM,SAAH,GAAe,MAAMQ,GAAN,IAAa;AACxBV,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BS,GAAG,CAACN,IAA9B;AACA,UAAIA,IAAI,GAAGG,IAAI,CAACI,KAAL,CAAWD,GAAG,CAACN,IAAf,CAAX;AACA,YAAMQ,EAAE,CAACC,QAAH,CAAYC,GAAZ,CAAgB;AAClBC,QAAAA,IAAI,EAAEX,IAAI,CAACY;AADO,OAAhB,EAEHC,IAFG,CAEE,MAAK;AACTC,QAAAA,WAAW,CAACR,GAAG,CAACN,IAAL,CAAX,CADS,CAET;AACH,OALK,EAKHe,KALG,CAKIC,GAAD,IAAQ;AACbC,QAAAA,MAAM,CAACC,KAAP,CAAaF,GAAb;AACH,OAPK,CAAN;AAQH,KAXD;AAYH;AACJ,CApBD","sourcesContent":["import React, { useEffect } from 'react';\nlet ws;\n\nconst Abc = () => {\n    useEffect(()=> {\n        ws = new WebSocket(\"ws://localhost:3000\");\n        ws.onopen = () => {\n            console.log(\"open connection\");\n        };\n    },[])\n\n    return(<div></div>)\n}\n\nexport default Abc;\n\n// const { default: db } = require(\"./Dexie/db\");\n\nonmessage = e => {\n    if (e.data.op === 'add') {\n        // ws.onopen = () => {\n        //     console.log(\"open connection\");\n        //     ws.send(JSON.stringify(e.data.value));\n        // };\n        ws.send(JSON.stringify(e.data.value));\n        ws.onmessage = async msg => {\n            console.log(\"getMessage\", msg.data);\n            let data = JSON.parse(msg.data);\n            await db.comments.add({\n                text: data.cmnt\n            }).then(()=> {\n                postMessage(msg.data);\n                // ws.close()\n            }).catch((err)=> {\n                window.alert(err);\n            })\n        };\n    }\n}\n"]},"metadata":{},"sourceType":"module"}