{"ast":null,"code":"/* eslint-disable import/no-unresolved */\nimport { unstable_batchedUpdates } from 'react-dom';\nimport { unstable_scheduleCallback as scheduleCallback, unstable_UserBlockingPriority as UserBlockingPriority } from 'scheduler';\nimport defaults from '../defaults';\nimport supports from './supported-features';\nlet isInsideBatchedSchedule = false;\nexport function batch(fn) {\n  // if we are in node/tests or feature disabled or nested schedule\n  if (!defaults.batchUpdates || !supports.scheduling() || isInsideBatchedSchedule) {\n    return unstable_batchedUpdates(fn);\n  }\n\n  isInsideBatchedSchedule = true; // Use UserBlockingPriority as it has max 250ms timeout\n  // https://github.com/facebook/react/blob/master/packages/scheduler/src/forks/SchedulerNoDOM.js#L47\n\n  return scheduleCallback(UserBlockingPriority, function scheduleBatchedUpdates() {\n    unstable_batchedUpdates(fn);\n    isInsideBatchedSchedule = false;\n  });\n}","map":{"version":3,"sources":["/Users/nirob/Desktop/rfh-chat/simplechat/node_modules/react-sweet-state/lib/esm/utils/batched-updates.js"],"names":["unstable_batchedUpdates","unstable_scheduleCallback","scheduleCallback","unstable_UserBlockingPriority","UserBlockingPriority","defaults","supports","isInsideBatchedSchedule","batch","fn","batchUpdates","scheduling","scheduleBatchedUpdates"],"mappings":"AAAA;AACA,SAASA,uBAAT,QAAwC,WAAxC;AACA,SAASC,yBAAyB,IAAIC,gBAAtC,EAAwDC,6BAA6B,IAAIC,oBAAzF,QAAqH,WAArH;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,IAAIC,uBAAuB,GAAG,KAA9B;AACA,OAAO,SAASC,KAAT,CAAeC,EAAf,EAAmB;AACxB;AACA,MAAI,CAACJ,QAAQ,CAACK,YAAV,IAA0B,CAACJ,QAAQ,CAACK,UAAT,EAA3B,IAAoDJ,uBAAxD,EAAiF;AAC/E,WAAOP,uBAAuB,CAACS,EAAD,CAA9B;AACD;;AAEDF,EAAAA,uBAAuB,GAAG,IAA1B,CANwB,CAMQ;AAChC;;AAEA,SAAOL,gBAAgB,CAACE,oBAAD,EAAuB,SAASQ,sBAAT,GAAkC;AAC9EZ,IAAAA,uBAAuB,CAACS,EAAD,CAAvB;AACAF,IAAAA,uBAAuB,GAAG,KAA1B;AACD,GAHsB,CAAvB;AAID","sourcesContent":["/* eslint-disable import/no-unresolved */\nimport { unstable_batchedUpdates } from 'react-dom';\nimport { unstable_scheduleCallback as scheduleCallback, unstable_UserBlockingPriority as UserBlockingPriority } from 'scheduler';\nimport defaults from '../defaults';\nimport supports from './supported-features';\nlet isInsideBatchedSchedule = false;\nexport function batch(fn) {\n  // if we are in node/tests or feature disabled or nested schedule\n  if (!defaults.batchUpdates || !supports.scheduling() || isInsideBatchedSchedule) {\n    return unstable_batchedUpdates(fn);\n  }\n\n  isInsideBatchedSchedule = true; // Use UserBlockingPriority as it has max 250ms timeout\n  // https://github.com/facebook/react/blob/master/packages/scheduler/src/forks/SchedulerNoDOM.js#L47\n\n  return scheduleCallback(UserBlockingPriority, function scheduleBatchedUpdates() {\n    unstable_batchedUpdates(fn);\n    isInsideBatchedSchedule = false;\n  });\n}"]},"metadata":{},"sourceType":"module"}